
import React, { useEffect, useState } from 'react'; import API from '../services/api'; export default function Sales(){ const [products,setProducts]=useState([]); const [form,setForm]=useState({productId:'',quantity:1,customerEmail:''}); const [sales,setSales]=useState([]); useEffect(()=>{ API.get('/products').then(r=>setProducts(r.data.data)); API.get('/sales').then(r=>setSales(r.data.data)); },[]); const submit=async e=>{ e.preventDefault(); try{ await API.post('/sales', form); alert('Sale created'); }catch(err){ alert(err.response?.data?.message||'Err'); } }; return (<div><h2 className="text-xl font-bold mb-4">Create Sale</h2><form onSubmit={submit} className="bg-white p-4 rounded shadow mb-6"><select onChange={e=>setForm({...form,productId:e.target.value})} className="border p-2 w-full mb-2"><option value="">Select product</option>{products.map(p=>(<option key={p._id} value={p._id}>{p.name}</option>))}</select><input type="number" defaultValue={1} onChange={e=>setForm({...form,quantity:e.target.value})} className="border p-2 w-full mb-2" /><input placeholder="Customer email" onChange={e=>setForm({...form,customerEmail:e.target.value})} className="border p-2 w-full mb-2" /><button className="bg-green-600 text-white px-4 py-2 rounded">Create Sale</button></form><div className="bg-white p-4 rounded shadow"><h3 className="font-bold mb-2">Recent Sales</h3><ul>{sales.map(s=>(<li key={s._id}>{s.quantity} x {s.product?.name}</li>))}</ul></div></div>); }
